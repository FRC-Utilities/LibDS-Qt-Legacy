<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>LibDS: MulticastDNS Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LibDS
   </div>
   <div id="projectbrief">Qt-based library for controlling FRC robots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pri-slots">Private Slots</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_multicast_d_n_s-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MulticastDNS Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for MulticastDNS:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_multicast_d_n_s.png" usemap="#MulticastDNS_map" alt=""/>
  <map id="MulticastDNS_map" name="MulticastDNS_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a2c099bdc50600ca980be637f2b085a95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multicast_d_n_s.html#a2c099bdc50600ca980be637f2b085a95">lookup</a> (const QString &amp;name)</td></tr>
<tr class="separator:a2c099bdc50600ca980be637f2b085a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:a44eba5f8a7f9dd7cba8c41863e3ceb15"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44eba5f8a7f9dd7cba8c41863e3ceb15"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>finished</b> (const QHostInfo &amp;info)</td></tr>
<tr class="separator:a44eba5f8a7f9dd7cba8c41863e3ceb15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-slots"></a>
Private Slots</h2></td></tr>
<tr class="memitem:af050525471ddb6f24674e643ea5695e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multicast_d_n_s.html#af050525471ddb6f24674e643ea5695e5">onReadyRead</a> ()</td></tr>
<tr class="separator:af050525471ddb6f24674e643ea5695e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a225614e419adca9f22747255df0c55ad"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multicast_d_n_s.html#a225614e419adca9f22747255df0c55ad">getHost</a> (const QByteArray &amp;data)</td></tr>
<tr class="separator:a225614e419adca9f22747255df0c55ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9238f0eaad191f3b1abdb57009506e42"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multicast_d_n_s.html#a9238f0eaad191f3b1abdb57009506e42">getIPv4</a> (const QByteArray &amp;data, const QString &amp;host)</td></tr>
<tr class="separator:a9238f0eaad191f3b1abdb57009506e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab81a8098ff85a6619e24a1b453441457"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multicast_d_n_s.html#ab81a8098ff85a6619e24a1b453441457">getIPv6</a> (const QByteArray &amp;data, const QString &amp;host, const QString &amp;ipv4)</td></tr>
<tr class="separator:ab81a8098ff85a6619e24a1b453441457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecaa88b22fbe053ad988e510577016c7"><td class="memItemLeft" align="right" valign="top">QList&lt; QHostAddress &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multicast_d_n_s.html#aecaa88b22fbe053ad988e510577016c7">getAddresses</a> (const QByteArray &amp;data, const QString &amp;host)</td></tr>
<tr class="separator:aecaa88b22fbe053ad988e510577016c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a25959fee9ceb5c5c55936d65c76e4de2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25959fee9ceb5c5c55936d65c76e4de2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_IPv4Binded</b></td></tr>
<tr class="separator:a25959fee9ceb5c5c55936d65c76e4de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30b213426bea43b6d942fe7b763a091"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab30b213426bea43b6d942fe7b763a091"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_IPv6Binded</b></td></tr>
<tr class="separator:ab30b213426bea43b6d942fe7b763a091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357c2147335f23f09a914e9e58ff4729"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a357c2147335f23f09a914e9e58ff4729"></a>
QUdpSocket&#160;</td><td class="memItemRight" valign="bottom"><b>m_IPv4Socket</b></td></tr>
<tr class="separator:a357c2147335f23f09a914e9e58ff4729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee997bcbd2387c6d220cb4cb4046d52"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afee997bcbd2387c6d220cb4cb4046d52"></a>
QUdpSocket&#160;</td><td class="memItemRight" valign="bottom"><b>m_IPv6Socket</b></td></tr>
<tr class="separator:afee997bcbd2387c6d220cb4cb4046d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aecaa88b22fbe053ad988e510577016c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QHostAddress &gt; MulticastDNS::getAddresses </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>host</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Obtains the IPv4 and IPv6 addresses from the received data. </p><dl class="section note"><dt>Note</dt><dd>This function will only generate a list with the valid IP addresses. </dd></dl>

<p>References <a class="el" href="class_multicast_d_n_s.html#a9238f0eaad191f3b1abdb57009506e42">getIPv4()</a>, and <a class="el" href="class_multicast_d_n_s.html#ab81a8098ff85a6619e24a1b453441457">getIPv6()</a>.</p>

<p>Referenced by <a class="el" href="class_multicast_d_n_s.html#af050525471ddb6f24674e643ea5695e5">onReadyRead()</a>.</p>

</div>
</div>
<a class="anchor" id="a225614e419adca9f22747255df0c55ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString MulticastDNS::getHost </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Extracts the host name from the <em>data</em> received from the mDNS network. The host name begins at byte #12 (when the header and flags end) and ends with a mandatory NUL character after the domain.</p>
<p>The host name is constructed in the following way (without spaces): <code>NAME_LENGTH</code> + <code>NAME</code> + <code>DOMAIN_LENGTH</code> + <code>DOMAIN</code> + <code>NUL</code> </p>
<p>For example, appletv.local would be formatted as: <code>0x07</code> + <code>appletv</code> + <code>0x05</code> + <code>local</code> + <code>0x00</code> </p>
<p>Or, if you prefer hex data: <code>{</code> 07 61 70 70 6c 65 74 76 05 6c 6f 63 61 6c 00 } <code>{</code> 7 a p p l e t v 5 l o c a l 0 }</p>
<p>In order to obtain the full host name (and its mDNS domain), we construct the string backwards. When the code notices that the current character is the same as the domain length, we know that the domain name has been extracted, and thus we can replace the domain length with a dot (.) and begin extracting the host name. </p>

<p>Referenced by <a class="el" href="class_multicast_d_n_s.html#af050525471ddb6f24674e643ea5695e5">onReadyRead()</a>.</p>

</div>
</div>
<a class="anchor" id="a9238f0eaad191f3b1abdb57009506e42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString MulticastDNS::getIPv4 </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>host</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Extracts the IPv4 from the <em>data</em> received from the mDNS network. The IPv4 data begins when the host name data ends. We can know if the IPv4 information is present in the packet by looking at the type codes, which are the first two bytes after the host name data.</p>
<p>For the packet to contain IPv4 information, the type codes must be <code>0x00</code> and <code>0x01</code> respectively. After the type codes, we have two bytes that represent the IP class codes, the following four bytes contain the TTL (which we do not use FYI). After the TTL, we have a byte that represents the number of bytes that construct the IPv4 address. After that, we finally have the address bytes (which we can extract if we know the IPv4 length, which is usually 4).</p>
<p>Here is the 'layout' of the IPv4 section of the packet:</p>
<ul>
<li>Type codes: <code>{0x00</code> 0x01} (used for verification)</li>
<li>Class Codes: <code>{0x80</code> 0x01} (used for verification)</li>
<li>TTL (four bytes)</li>
<li>IP length (one byte)</li>
<li>IP address bytes (depend on length)</li>
</ul>
<p>This is an example IPv4 section: <code>{00</code> 01 80 01 00 00 78 00 00 04 99 6d 07 5a}</p>
<p>Data in example section:</p><ul>
<li><code>{00</code> 01} Type Codes</li>
<li><code>{80</code> 01} Class Codes</li>
<li><code>{00</code> 00 78 00 00} IP TTL</li>
<li><code>{04}</code> Number of address bytes (length in layman's terms)</li>
<li><code>{99</code> 6d 07 5a} IPv4 Address bytes (153, 109, 7, 90) </li>
</ul>

<p>Referenced by <a class="el" href="class_multicast_d_n_s.html#aecaa88b22fbe053ad988e510577016c7">getAddresses()</a>.</p>

</div>
</div>
<a class="anchor" id="ab81a8098ff85a6619e24a1b453441457"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString MulticastDNS::getIPv6 </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>ipv4</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Extracts the IPv6 from the <em>data</em> received from the mDNS network. The IPv6 data begins when the IPv4 data and the two-byte FQDN ends. As with the IPv4 code, we can know if the IPv6 information is present in the packet by looking at the type codes, which are the first two bytes after the IPv4 and FQDN data.</p>
<p>For the packet to contain IPv6 information, the type codes must be <code>0x00</code> and <code>0x1C</code> respectively. After the type codes, we have two bytes that represent the IP class codes, the following four bytes contain the TTL (which we do not use FYI). After the TTL, we have a byte that represents the number of bytes that construct the IPv6 address. After that, we finally have the address bytes (which we can extract if we know the IPv6 length, which is usually 16).</p>
<p>Here is the 'layout' of the IPv4 section of the packet:</p>
<ul>
<li>Type codes: <code>{0x00</code> 0xC1} (used for verification)</li>
<li>Class Codes: <code>{0x80</code> 0x01} (used for verification)</li>
<li>TTL (four bytes)</li>
<li>IP length (one byte)</li>
<li>IP address bytes (depend on length, usually 16)</li>
</ul>
<p>This is an example IPv6 section: <code>{</code> 00 1c 80 01 00 00 78 00 00 10 fe 80 00 } <code>{</code> 00 00 00 00 00 02 23 32 ff fe b1 21 52 }</p>
<p>Data in example section:</p><ul>
<li><code>{00</code> 1c} Type Codes</li>
<li><code>{80</code> 01} Class Codes</li>
<li><code>{00</code> 00 78 00 00} IP TTL</li>
<li><code>{10}</code> Number of address bytes (length in layman's terms)</li>
<li><code>{fe</code> 80 00 00 ... 52} IPv6 Address bytes (there are 16 of them) </li>
</ul>

<p>Referenced by <a class="el" href="class_multicast_d_n_s.html#aecaa88b22fbe053ad988e510577016c7">getAddresses()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c099bdc50600ca980be637f2b085a95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MulticastDNS::lookup </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Performs a mDNS lookup to find the IP address of the given host <em>name</em>.</p>
<dl class="section note"><dt>Note</dt><dd>If the <code>alreadySupported()</code> function returns <code>true</code>, then this class will use the native implementation of the OS to find the given host <em>name</em>. </dd>
<dd>
If the <code>alreadySupported()</code> function returns <code>false</code>, then this class will perform the mDNS lookup by itself using Qt socket programming. </dd></dl>

<p>Referenced by <a class="el" href="class_lookup.html#af67ea2ada6f6d15c1d1f4b7d8ca62d5b">Lookup::lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="af050525471ddb6f24674e643ea5695e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MulticastDNS::onReadyRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when we receive data from a mDNS service on the network. </p><dl class="section note"><dt>Note</dt><dd>We will only take into account mDNS response packets, not queries. </dd></dl>

<p>References <a class="el" href="class_multicast_d_n_s.html#aecaa88b22fbe053ad988e510577016c7">getAddresses()</a>, and <a class="el" href="class_multicast_d_n_s.html#a225614e419adca9f22747255df0c55ad">getHost()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_multicast_d_n_s_8h_source.html">MulticastDNS.h</a></li>
<li>MulticastDNS.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
